<mat-accordion>
  <mat-expansion-panel
    (opened)="panelOpenState.set(true)"
    (closed)="panelOpenState.set(false)"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> Filter</mat-panel-title>
      <mat-panel-description>
        @if(!!dateFilterForm.value.fromDate) {
        <span class="me-4"
          ><strong>From:</strong>
          {{
            datePipe.transform(dateFilterForm.value.fromDate, "yyyy-MM-dd")
          }}</span
        >
        }
        @if(!!dateFilterForm.value.toDate) {
          <span
            ><strong>To:</strong>
            {{
              datePipe.transform(dateFilterForm.value.toDate, "yyyy-MM-dd")
            }}</span
          >
          }
      </mat-panel-description>
    </mat-expansion-panel-header>
    <form
      [formGroup]="dateFilterForm"
      (ngSubmit)="onSubmit()"
      fxLayout="column"
      fxLayoutGap="10px"
    >
      <mat-form-field appearance="fill">
        <mat-label>From Date</mat-label>
        <input
          matInput
          [matDatepicker]="fromPicker"
          formControlName="fromDate"
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="fromPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #fromPicker></mat-datepicker>
        @if(dateFilterForm.get('fromDate')?.value) {
        <button mat-icon-button matSuffix (click)="clearDate('fromDate')">
          <mat-icon>clear</mat-icon>
        </button>
        }
      </mat-form-field>

      <mat-form-field appearance="fill" class="ms-2">
        <mat-label>To Date</mat-label>
        <input matInput [matDatepicker]="toPicker" formControlName="toDate" />
        <mat-datepicker-toggle
          matSuffix
          [for]="toPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #toPicker></mat-datepicker>
        @if(dateFilterForm.get('toDate')?.value) {
        <button mat-icon-button matSuffix (click)="clearDate('toDate')">
          <mat-icon>clear</mat-icon>
        </button>
        }
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit" class="ms-2">
        Submit
      </button>
    </form>
  </mat-expansion-panel>
</mat-accordion>
